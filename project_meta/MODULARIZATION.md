# План модуляризации pdf2video

Этот документ описывает стратегию разделения монолитного приложения на независимые модули для обеспечения параллельной разработки и тестируемости.

## Рекомендуемая структура каталогов

```text
pdf2video/
├── cmd/
│   └── pdf2video/
│       └── main.go         # Точка входа: сборка зависимостей и запуск
├── internal/
│   ├── config/             # Общие конфигурационные структуры (DTO)
│   ├── source/             # Модуль работы с исходниками (PDF, Images)
│   ├── analyzer/           # Модуль анализа изображений (ContrastDetector)
│   ├── director/           # Модуль генерации/чтения сценариев (Scenario)
│   ├── video/              # Модуль работы с видео ( FFmpegEncoder )
│   ├── effects/            # Модуль анимационных эффектов ( ScenarioEffect )
│   ├── engine/             # Ядро ( VideoProject ): оркестрация процессов
│   └── system/             # Системные утилиты: лимиты ОС, поиск файлов
├── docs/                   # Техническая документация и планы развития
├── input/                  # Исходные данные (PDF, Audio)
└── output/                 # Результаты генерации
```

## Разделение ответственности (Артефакты)

1. **internal/source**: Полная изоляция логики чтения медиа-файлов. Позволяет добавлять поддержку новых форматов (Images, PDF, PPTX) в одном месте.
2. **internal/video**: Изоляция вызовов внешней утилиты FFmpeg. Место для реализации аппаратного ускорения (GPU) и управления потоками данных.
3. **internal/effects**: Математическая логика анимаций. Разработчики могут добавлять новые типы "зума", "панорамирования" или "фильтров", реализуя интерфейс `Effect`.
4. **internal/engine**: Место, где PDF превращается в Видео. Управляет очередями (Worker Pool) и жизненным циклом временного хранилища.

## Преимущества для команды

- **Независимость**: Изменения в логике FFmpeg не требуют пересборки или тестирования модуля PDF.
- **Масштабируемость**: Разные разработчики работают в разных директориях, что минимизирует конфликты при слиянии веток (Git Merge).
- **Тестируемость**: Возможность писать Unit-тесты для каждого модуля в отдельности с использованием Mock-объектов.
